{"ast":null,"code":"import { all, fork, takeLatest, put, call, take, delay } from 'redux-saga/effects';\nimport axios from 'axios';\nimport { LOG_IN_REQUEST, LOG_IN_SUCCESS, LOG_IN_FAILURE, SIGN_UP_REQUEST, SIGN_UP_SUCCESS, SIGN_UP_FAILURE, LOG_OUT_SUCCESS, LOG_OUT_FAILURE, LOG_OUT_REQUEST, LOAD_USER_REQUEST, LOAD_USER_SUCCESS, LOAD_USER_FAILURE, FOLLOW_USER_REQUEST, FOLLOW_USER_SUCCESS, FOLLOW_USER_FAILURE, UNFOLLOW_USER_REQUEST, UNFOLLOW_USER_SUCCESS, UNFOLLOW_USER_FAILURE, LOAD_FOLLOWERS_REQUEST, LOAD_FOLLOWERS_SUCCESS, LOAD_FOLLOWERS_FAILURE, LOAD_FOLLOWINGS_REQUEST, LOAD_FOLLOWINGS_SUCCESS, LOAD_FOLLOWINGS_FAILURE, REMOVE_FOLLOWER_REQUEST, REMOVE_FOLLOWER_SUCCESS, REMOVE_FOLLOWER_FAILURE, EDIT_NICKNAME_REQUEST, EDIT_NICKNAME_SUCCESS, EDIT_NICKNAME_FAILURE } from '../reducers/user'; // SIGN UP\n\nfunction signUpAPI(signUpData) {\n  return axios.post('/user/', signUpData);\n}\n\nfunction* signUp(action) {\n  try {\n    yield call(signUpAPI, action.data); // throw new Error('일부로 에러 내기');\n\n    yield put({\n      type: SIGN_UP_SUCCESS\n    });\n  } catch (e) {\n    console.error(e);\n    yield put({\n      type: SIGN_UP_FAILURE\n    });\n  }\n}\n\nfunction* watchSignUp() {\n  yield takeLatest(SIGN_UP_REQUEST, signUp);\n} // LOG IN\n\n\nfunction loginAPI(loginData) {\n  return axios.post('/user/login/', loginData, {\n    withCredentials: true\n  });\n}\n\nfunction* login(action) {\n  try {\n    const result = yield call(loginAPI, action.data);\n    yield put({\n      type: LOG_IN_SUCCESS,\n      data: result.data\n    });\n  } catch (e) {\n    console.error(e);\n    yield put({\n      type: LOG_IN_FAILURE\n    });\n  }\n}\n\nfunction* watchLogin() {\n  yield takeLatest(LOG_IN_REQUEST, login);\n}\n\nfunction logoutAPI() {\n  return axios.post('/user/logout/', {}, {\n    withCredentials: true\n  });\n}\n\nfunction* logout() {\n  try {\n    yield call(logoutAPI);\n    yield put({\n      type: LOG_OUT_SUCCESS\n    });\n  } catch (e) {\n    console.error(e);\n    ;\n    yield put({\n      type: LOG_OUT_FAILURE\n    });\n  }\n}\n\nfunction* watchLogout() {\n  yield takeLatest(LOG_OUT_REQUEST, logout);\n}\n\nfunction loadUserAPI(userId) {\n  return axios.get(userId ? `/user/${userId}` : `/user/`, {\n    // /user : 내정보, /user/:id 남의정보\n    withCredentials: true\n  });\n}\n\nfunction* loadUser(action) {\n  try {\n    const result = yield call(loadUserAPI, action.data);\n    yield put({\n      type: LOAD_USER_SUCCESS,\n      data: result.data,\n      isMe: !action.data\n    });\n  } catch (e) {\n    console.error(e);\n    ;\n    yield put({\n      type: LOAD_USER_FAILURE\n    });\n  }\n}\n\nfunction* watchLoadUser() {\n  yield takeLatest(LOAD_USER_REQUEST, loadUser);\n}\n\nfunction followAPI(userId) {\n  return axios.post(`/user/${userId}/follow/`, {}, {\n    withCredentials: true\n  });\n}\n\nfunction* follow(action) {\n  try {\n    const result = yield call(followAPI, action.data);\n    yield put({\n      type: FOLLOW_USER_SUCCESS,\n      data: result.data\n    });\n  } catch (e) {\n    console.error(e);\n    ;\n    yield put({\n      type: FOLLOW_USER_FAILURE\n    });\n  }\n}\n\nfunction* watchFollow() {\n  yield takeLatest(FOLLOW_USER_REQUEST, follow);\n}\n\nfunction unFollowAPI(userId) {\n  return axios.delete(`/user/${userId}/follow/`, {\n    withCredentials: true\n  });\n}\n\nfunction* unFollow(action) {\n  try {\n    const result = yield call(unFollowAPI, action.data);\n    yield put({\n      type: UNFOLLOW_USER_SUCCESS,\n      data: result.data\n    });\n  } catch (e) {\n    console.error(e);\n    ;\n    yield put({\n      type: UNFOLLOW_USER_FAILURE\n    });\n  }\n}\n\nfunction* watchUnFollow() {\n  yield takeLatest(UNFOLLOW_USER_REQUEST, unFollow);\n}\n\nfunction loadFollowersAPI(userId) {\n  return axios.get(`/user/${userId}/followers/`, {\n    withCredentials: true\n  });\n}\n\nfunction* loadFollowers(action) {\n  try {\n    const result = yield call(loadFollowersAPI, action.data);\n    yield put({\n      type: LOAD_FOLLOWERS_SUCCESS,\n      data: result.data\n    });\n  } catch (e) {\n    console.error(e);\n    ;\n    yield put({\n      type: LOAD_FOLLOWERS_FAILURE\n    });\n  }\n}\n\nfunction* watchLoadFollowers() {\n  yield takeLatest(LOAD_FOLLOWERS_REQUEST, loadFollowers);\n}\n\nfunction loadFollowingsAPI(userId) {\n  return axios.get(`/user/${userId}/followings/`, {\n    withCredentials: true\n  });\n}\n\nfunction* loadFollowings(action) {\n  try {\n    const result = yield call(loadFollowingsAPI, action.data);\n    yield put({\n      type: LOAD_FOLLOWINGS_SUCCESS,\n      data: result.data\n    });\n  } catch (e) {\n    console.error(e);\n    ;\n    yield put({\n      type: LOAD_FOLLOWINGS_FAILURE\n    });\n  }\n}\n\nfunction* watchLoadFollowings() {\n  yield takeLatest(LOAD_FOLLOWINGS_REQUEST, loadFollowings);\n}\n\nfunction removeFollowerAPI(userId) {\n  return axios.delete(`/user/${userId}/follower/`, {\n    withCredentials: true\n  });\n}\n\nfunction* removeFollower(action) {\n  try {\n    const result = yield call(removeFollowerAPI, action.data);\n    yield put({\n      type: REMOVE_FOLLOWER_SUCCESS,\n      data: result.data\n    });\n  } catch (e) {\n    console.error(e);\n    yield put({\n      type: REMOVE_FOLLOWER_FAILURE\n    });\n  }\n}\n\nfunction* watchRemoveFollower() {\n  yield takeLatest(REMOVE_FOLLOWER_REQUEST, removeFollower);\n}\n\nfunction editNicknameAPI(nickname) {\n  return axios.patch(`/user/nickname/`, {\n    nickname\n  }, {\n    withCredentials: true\n  });\n}\n\nfunction* editNickname(action) {\n  try {\n    const result = yield call(editNicknameAPI, action.data);\n    yield put({\n      type: EDIT_NICKNAME_SUCCESS,\n      data: result.data\n    });\n  } catch (e) {\n    console.error(e);\n    yield put({\n      type: EDIT_NICKNAME_FAILURE\n    });\n  }\n}\n\nfunction* watchEditNickname() {\n  yield takeLatest(EDIT_NICKNAME_REQUEST, editNickname);\n}\n\nexport default function* userSaga() {\n  yield all([watchSignUp(), watchLogin(), watchLogout(), watchLoadUser(), watchFollow(), watchUnFollow(), watchLoadFollowers(), watchLoadFollowings(), watchRemoveFollower(), watchEditNickname()]);\n}","map":{"version":3,"sources":["C:/Program Files/Git/usr/react-nodebird/ch6/front/sagas/user.js"],"names":["all","fork","takeLatest","put","call","take","delay","axios","LOG_IN_REQUEST","LOG_IN_SUCCESS","LOG_IN_FAILURE","SIGN_UP_REQUEST","SIGN_UP_SUCCESS","SIGN_UP_FAILURE","LOG_OUT_SUCCESS","LOG_OUT_FAILURE","LOG_OUT_REQUEST","LOAD_USER_REQUEST","LOAD_USER_SUCCESS","LOAD_USER_FAILURE","FOLLOW_USER_REQUEST","FOLLOW_USER_SUCCESS","FOLLOW_USER_FAILURE","UNFOLLOW_USER_REQUEST","UNFOLLOW_USER_SUCCESS","UNFOLLOW_USER_FAILURE","LOAD_FOLLOWERS_REQUEST","LOAD_FOLLOWERS_SUCCESS","LOAD_FOLLOWERS_FAILURE","LOAD_FOLLOWINGS_REQUEST","LOAD_FOLLOWINGS_SUCCESS","LOAD_FOLLOWINGS_FAILURE","REMOVE_FOLLOWER_REQUEST","REMOVE_FOLLOWER_SUCCESS","REMOVE_FOLLOWER_FAILURE","EDIT_NICKNAME_REQUEST","EDIT_NICKNAME_SUCCESS","EDIT_NICKNAME_FAILURE","signUpAPI","signUpData","post","signUp","action","data","type","e","console","error","watchSignUp","loginAPI","loginData","withCredentials","login","result","watchLogin","logoutAPI","logout","watchLogout","loadUserAPI","userId","get","loadUser","isMe","watchLoadUser","followAPI","follow","watchFollow","unFollowAPI","delete","unFollow","watchUnFollow","loadFollowersAPI","loadFollowers","watchLoadFollowers","loadFollowingsAPI","loadFollowings","watchLoadFollowings","removeFollowerAPI","removeFollower","watchRemoveFollower","editNicknameAPI","nickname","patch","editNickname","watchEditNickname","userSaga"],"mappings":"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","sourcesContent":["import { all, fork, takeLatest, put, call, take, delay } from 'redux-saga/effects';\r\nimport axios from 'axios'\r\nimport { \r\n    LOG_IN_REQUEST, LOG_IN_SUCCESS, LOG_IN_FAILURE, \r\n    SIGN_UP_REQUEST, SIGN_UP_SUCCESS, SIGN_UP_FAILURE,\r\n    LOG_OUT_SUCCESS,LOG_OUT_FAILURE,LOG_OUT_REQUEST, \r\n    LOAD_USER_REQUEST, LOAD_USER_SUCCESS,LOAD_USER_FAILURE,\r\n    FOLLOW_USER_REQUEST, FOLLOW_USER_SUCCESS, FOLLOW_USER_FAILURE,\r\n    UNFOLLOW_USER_REQUEST, UNFOLLOW_USER_SUCCESS, UNFOLLOW_USER_FAILURE,\r\n    LOAD_FOLLOWERS_REQUEST, LOAD_FOLLOWERS_SUCCESS, LOAD_FOLLOWERS_FAILURE,\r\n    LOAD_FOLLOWINGS_REQUEST, LOAD_FOLLOWINGS_SUCCESS, LOAD_FOLLOWINGS_FAILURE,\r\n    REMOVE_FOLLOWER_REQUEST, REMOVE_FOLLOWER_SUCCESS, REMOVE_FOLLOWER_FAILURE,\r\n    EDIT_NICKNAME_REQUEST, EDIT_NICKNAME_SUCCESS, EDIT_NICKNAME_FAILURE\r\n} from '../reducers/user'\r\n\r\n// SIGN UP\r\nfunction signUpAPI(signUpData) {\r\n    return axios.post('/user/', signUpData)\r\n}\r\n\r\nfunction* signUp(action) {\r\n    try {\r\n        yield call(signUpAPI, action.data);\r\n        // throw new Error('일부로 에러 내기');\r\n        yield put({\r\n            type: SIGN_UP_SUCCESS,\r\n        });\r\n    } catch (e) {\r\n        console.error(e);\r\n        yield put({\r\n            type: SIGN_UP_FAILURE,\r\n        });\r\n    }\r\n}\r\n\r\nfunction* watchSignUp() {\r\n    yield takeLatest(SIGN_UP_REQUEST, signUp); \r\n}\r\n\r\n// LOG IN\r\nfunction loginAPI(loginData) {\r\n  return axios.post('/user/login/', loginData, {\r\n      withCredentials: true,\r\n  });\r\n}\r\n\r\nfunction* login(action) {\r\n    try {\r\n        const result = yield call(loginAPI, action.data);\r\n        yield put({\r\n            type: LOG_IN_SUCCESS,\r\n            data: result.data,\r\n        });\r\n    } catch (e) {\r\n        console.error(e);\r\n        yield put({\r\n            type: LOG_IN_FAILURE,\r\n        });\r\n    }\r\n}\r\n\r\nfunction *watchLogin() {\r\n    yield takeLatest(LOG_IN_REQUEST, login);\r\n}\r\n\r\nfunction logoutAPI() {\r\n    return axios.post('/user/logout/', {}, {\r\n        withCredentials: true,\r\n    })\r\n}\r\n\r\nfunction* logout() {\r\n    try {\r\n        yield call(logoutAPI)\r\n        yield put({\r\n            type: LOG_OUT_SUCCESS\r\n        })\r\n    } catch(e) {\r\n        console.error(e);;\r\n        yield put({\r\n            type: LOG_OUT_FAILURE\r\n        })\r\n    }\r\n}\r\n\r\nfunction *watchLogout() {\r\n    yield takeLatest(LOG_OUT_REQUEST, logout);\r\n}\r\n\r\nfunction loadUserAPI(userId) {\r\n    return axios.get(userId ? `/user/${userId}` : `/user/`, { // /user : 내정보, /user/:id 남의정보\r\n        withCredentials: true,\r\n    })\r\n}\r\n\r\nfunction* loadUser(action) {\r\n    try {\r\n        const result = yield call(loadUserAPI, action.data)\r\n        yield put({\r\n            type: LOAD_USER_SUCCESS,\r\n            data: result.data,\r\n            isMe: !action.data\r\n        })\r\n    } catch(e) {\r\n        console.error(e);;\r\n        yield put({\r\n            type: LOAD_USER_FAILURE\r\n        })\r\n    }\r\n}\r\n\r\nfunction *watchLoadUser() {\r\n    yield takeLatest(LOAD_USER_REQUEST, loadUser);\r\n}\r\n\r\nfunction followAPI(userId) {\r\n    return axios.post(`/user/${userId}/follow/`, {}, {\r\n        withCredentials: true,\r\n    })\r\n}\r\n\r\nfunction* follow(action) {\r\n    try {\r\n        const result = yield call(followAPI, action.data)\r\n        yield put({\r\n            type: FOLLOW_USER_SUCCESS,\r\n            data: result.data,\r\n        })\r\n    } catch(e) {\r\n        console.error(e);;\r\n        yield put({\r\n            type: FOLLOW_USER_FAILURE\r\n        })\r\n    }\r\n}\r\n\r\nfunction *watchFollow() {\r\n    yield takeLatest(FOLLOW_USER_REQUEST, follow);\r\n}\r\n\r\nfunction unFollowAPI(userId) {\r\n    return axios.delete(`/user/${userId}/follow/`, {\r\n        withCredentials: true,\r\n    })\r\n}\r\n\r\nfunction* unFollow(action) {\r\n    try {\r\n        const result = yield call(unFollowAPI, action.data)\r\n        yield put({\r\n            type: UNFOLLOW_USER_SUCCESS,\r\n            data: result.data,\r\n        })\r\n    } catch(e) {\r\n        console.error(e);;\r\n        yield put({\r\n            type: UNFOLLOW_USER_FAILURE\r\n        })\r\n    }\r\n}\r\n\r\nfunction *watchUnFollow() {\r\n    yield takeLatest(UNFOLLOW_USER_REQUEST, unFollow);\r\n}\r\n\r\nfunction loadFollowersAPI(userId) {\r\n    return axios.get(`/user/${userId}/followers/`, {\r\n        withCredentials: true,\r\n    })\r\n}\r\n\r\nfunction* loadFollowers(action) {\r\n    try {\r\n        const result = yield call(loadFollowersAPI, action.data)\r\n        yield put({\r\n            type: LOAD_FOLLOWERS_SUCCESS,\r\n            data: result.data,\r\n        })\r\n    } catch(e) {\r\n        console.error(e);;\r\n        yield put({\r\n            type: LOAD_FOLLOWERS_FAILURE\r\n        })\r\n    }\r\n}\r\n\r\nfunction *watchLoadFollowers() {\r\n    yield takeLatest(LOAD_FOLLOWERS_REQUEST, loadFollowers);\r\n}\r\n\r\nfunction loadFollowingsAPI(userId) {\r\n    return axios.get(`/user/${userId}/followings/`, {\r\n        withCredentials: true,\r\n    })\r\n}\r\n\r\nfunction* loadFollowings(action) {\r\n    try {\r\n        const result = yield call(loadFollowingsAPI, action.data)\r\n        yield put({\r\n            type: LOAD_FOLLOWINGS_SUCCESS,\r\n            data: result.data,\r\n        })\r\n    } catch(e) {\r\n        console.error(e);;\r\n        yield put({\r\n            type: LOAD_FOLLOWINGS_FAILURE\r\n        })\r\n    }\r\n}\r\n\r\nfunction *watchLoadFollowings() {\r\n    yield takeLatest(LOAD_FOLLOWINGS_REQUEST, loadFollowings);\r\n}\r\n\r\nfunction removeFollowerAPI(userId) {\r\n    return axios.delete(`/user/${userId}/follower/`, {\r\n        withCredentials: true,\r\n    })\r\n}\r\n\r\nfunction* removeFollower(action) {\r\n    try {\r\n        const result = yield call(removeFollowerAPI, action.data)\r\n        yield put({\r\n            type: REMOVE_FOLLOWER_SUCCESS,\r\n            data: result.data,\r\n        })\r\n    } catch(e) {\r\n        console.error(e);\r\n        yield put({\r\n            type: REMOVE_FOLLOWER_FAILURE\r\n        })\r\n    }\r\n}\r\n\r\nfunction *watchRemoveFollower() {\r\n    yield takeLatest(REMOVE_FOLLOWER_REQUEST, removeFollower);\r\n}\r\n\r\nfunction editNicknameAPI(nickname) {\r\n    return axios.patch(`/user/nickname/`, { nickname }, {\r\n        withCredentials: true,\r\n    })\r\n}\r\n\r\nfunction* editNickname(action) {\r\n    try {\r\n        const result = yield call(editNicknameAPI, action.data)\r\n        yield put({\r\n            type: EDIT_NICKNAME_SUCCESS,\r\n            data: result.data,\r\n        })\r\n    } catch(e) {\r\n        console.error(e);\r\n        yield put({\r\n            type: EDIT_NICKNAME_FAILURE\r\n        })\r\n    }\r\n}\r\n\r\nfunction *watchEditNickname() {\r\n    yield takeLatest(EDIT_NICKNAME_REQUEST, editNickname);\r\n}\r\n\r\nexport default function* userSaga() {\r\n    yield all([\r\n        watchSignUp(),\r\n        watchLogin(),\r\n        watchLogout(),\r\n        watchLoadUser(),\r\n        watchFollow(),\r\n        watchUnFollow(),\r\n        watchLoadFollowers(),\r\n        watchLoadFollowings(),\r\n        watchRemoveFollower(),\r\n        watchEditNickname(),\r\n    ]);\r\n}"]},"metadata":{},"sourceType":"module"}