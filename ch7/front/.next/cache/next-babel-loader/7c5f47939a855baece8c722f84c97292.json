{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport { Input, Button, Card, Form, List, Icon } from 'antd';\nimport NicknameEditForm from '../components/NicknameEditForm';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { LOAD_FOLLOWERS_REQUEST, LOAD_FOLLOWINGS_REQUEST, REMOVE_FOLLOWER_REQUEST, UNFOLLOW_USER_REQUEST } from '../reducers/user';\n\nvar Profile = function Profile() {\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      me = _useSelector.me,\n      followerList = _useSelector.followerList,\n      followingList = _useSelector.followingList;\n\n  var dispatch = useDispatch(); // useEffect(() => {\n  //     if (me) {\n  //         dispatch({\n  //             type: LOAD_FOLLOWERS_REQUEST,\n  //             data: me.id\n  //         })\n  //         dispatch({\n  //             type: LOAD_FOLLOWINGS_REQUEST,\n  //             data: me.id\n  //         })\n  //     }\n  // }, [me && me.id])\n\n  var onUnFollow = function onUnFollow(userId) {\n    return function () {\n      dispatch({\n        type: UNFOLLOW_USER_REQUEST,\n        data: userId\n      });\n    };\n  };\n\n  var onRemoveFollower = function onRemoveFollower(userId) {\n    return function () {\n      dispatch({\n        type: REMOVE_FOLLOWER_REQUEST,\n        data: userId\n      });\n    };\n  };\n\n  return __jsx(\"div\", null, __jsx(NicknameEditForm, null), __jsx(List, {\n    style: {\n      marginBottom: '20px'\n    },\n    grid: {\n      gutter: 4,\n      xs: 2,\n      md: 3\n    },\n    size: \"small\",\n    header: __jsx(\"div\", null, \"\\uD314\\uB85C\\uC789 \\uBAA9\\uB85D\"),\n    loadMore: __jsx(Button, {\n      style: {\n        width: '100%'\n      }\n    }, \"\\uB354 \\uBCF4\\uAE30\"),\n    bordered: true,\n    dataSource: followingList,\n    renderItem: function renderItem(item) {\n      return __jsx(List.Item, {\n        style: {\n          marginTop: '20px'\n        }\n      }, __jsx(Card, {\n        actions: [__jsx(Icon, {\n          key: \"stop\",\n          type: \"stop\",\n          onClick: onUnFollow(item.id)\n        })]\n      }, __jsx(Card.Meta, {\n        description: item.nickname\n      })));\n    }\n  }), __jsx(List, {\n    style: {\n      marginBottom: '20px'\n    },\n    grid: {\n      gutter: 4,\n      xs: 2,\n      md: 3\n    },\n    size: \"small\",\n    header: __jsx(\"div\", null, \"\\uD314\\uB85C\\uC6CC \\uBAA9\\uB85D\"),\n    loadMore: __jsx(Button, {\n      style: {\n        width: '100%'\n      }\n    }, \"\\uB354 \\uBCF4\\uAE30\"),\n    bordered: true,\n    dataSource: followerList,\n    renderItem: function renderItem(item) {\n      return __jsx(List.Item, {\n        style: {\n          marginTop: '20px'\n        }\n      }, __jsx(Card, {\n        actions: [__jsx(Icon, {\n          key: \"stop\",\n          type: \"stop\",\n          onClick: onRemoveFollower(item.id)\n        })]\n      }, __jsx(Card.Meta, {\n        description: item.nickname\n      })));\n    }\n  }));\n};\n\nProfile.getInitialProps =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(context) {\n    var state, me;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            state = context.store.getState();\n            me = state.user.me;\n            console.log('me=', me); // if (me) {\n\n            context.store.dispatch({\n              type: LOAD_FOLLOWERS_REQUEST,\n              data: me && me.id\n            });\n            context.store.dispatch({\n              type: LOAD_FOLLOWINGS_REQUEST,\n              data: me && me.id\n            }); // }\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default Profile;","map":{"version":3,"sources":["C:/Program Files/Git/usr/react-nodebird/ch7/front/pages/profile.js"],"names":["React","useEffect","Input","Button","Card","Form","List","Icon","NicknameEditForm","useDispatch","useSelector","LOAD_FOLLOWERS_REQUEST","LOAD_FOLLOWINGS_REQUEST","REMOVE_FOLLOWER_REQUEST","UNFOLLOW_USER_REQUEST","Profile","state","user","me","followerList","followingList","dispatch","onUnFollow","userId","type","data","onRemoveFollower","marginBottom","gutter","xs","md","width","item","marginTop","id","nickname","getInitialProps","context","store","getState","console","log"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\r\nimport { Input, Button, Card, Form, List, Icon } from 'antd'\r\nimport NicknameEditForm from '../components/NicknameEditForm'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport {\r\n    LOAD_FOLLOWERS_REQUEST, LOAD_FOLLOWINGS_REQUEST,\r\n    REMOVE_FOLLOWER_REQUEST, UNFOLLOW_USER_REQUEST\r\n} from '../reducers/user'\r\n\r\nconst Profile = () => {\r\n    const { me, followerList, followingList } = useSelector(state => state.user);\r\n    const dispatch = useDispatch();\r\n\r\n    // useEffect(() => {\r\n    //     if (me) {\r\n    //         dispatch({\r\n    //             type: LOAD_FOLLOWERS_REQUEST,\r\n    //             data: me.id\r\n    //         })\r\n    //         dispatch({\r\n    //             type: LOAD_FOLLOWINGS_REQUEST,\r\n    //             data: me.id\r\n    //         })\r\n    //     }\r\n    // }, [me && me.id])\r\n\r\n    const onUnFollow = userId => () => {\r\n        dispatch({\r\n            type: UNFOLLOW_USER_REQUEST,\r\n            data: userId\r\n        })\r\n    }\r\n\r\n    const onRemoveFollower = userId => () => {\r\n        dispatch({\r\n            type: REMOVE_FOLLOWER_REQUEST,\r\n            data: userId\r\n        })\r\n    }\r\n\r\n    return  (\r\n    <div>\r\n        <NicknameEditForm />\r\n        <List \r\n            style={{ marginBottom: '20px' }}\r\n            grid={{ gutter: 4, xs: 2, md: 3 }}\r\n            size=\"small\"\r\n            header={<div>팔로잉 목록</div>}\r\n            loadMore={<Button style={{ width: '100%' }}>더 보기</Button>}\r\n            bordered\r\n            dataSource={followingList}\r\n            renderItem={item => (\r\n                <List.Item style={{ marginTop: '20px' }}>\r\n                    <Card actions={[<Icon key='stop' type=\"stop\" onClick={onUnFollow(item.id)} />]}>\r\n                        <Card.Meta description={item.nickname} />\r\n                    </Card>\r\n                </List.Item>\r\n            )}\r\n        />\r\n        <List \r\n            style={{ marginBottom: '20px' }}\r\n            grid={{ gutter: 4, xs: 2, md: 3 }}\r\n            size=\"small\"\r\n            header={<div>팔로워 목록</div>}\r\n            loadMore={<Button style={{ width: '100%' }}>더 보기</Button>}\r\n            bordered\r\n            dataSource={followerList}\r\n            renderItem={item => (\r\n                <List.Item style={{ marginTop: '20px' }}>\r\n                    <Card actions={[<Icon key='stop' type=\"stop\" onClick={onRemoveFollower(item.id)} />]}>\r\n                        <Card.Meta description={item.nickname} />\r\n                    </Card>\r\n                </List.Item>\r\n            )}\r\n        />\r\n    </div> \r\n    )\r\n}\r\n\r\nProfile.getInitialProps = async (context) => {\r\n    const state = context.store.getState();\r\n    const me = state.user.me;\r\n    console.log('me=', me);\r\n    \r\n    // if (me) {\r\n        context.store.dispatch({\r\n            type: LOAD_FOLLOWERS_REQUEST,\r\n            data: me && me.id\r\n        })\r\n        context.store.dispatch({\r\n            type: LOAD_FOLLOWINGS_REQUEST,\r\n            data: me && me.id\r\n        })\r\n    // }\r\n}\r\n\r\nexport default Profile;"]},"metadata":{},"sourceType":"module"}